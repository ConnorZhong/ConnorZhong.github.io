<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Cayley 公式 | ConnorZhong is weak</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="训练的时候做了 ICPCCamp Day 8 rgn_58 Contest 4. 遇到了奇妙的 Cayley 公式，惨遭教做人，很努力的数了数也只找到 $O(n^2)$ 的做法。这类 Well-known Theory 还是需要慢慢积累的。 特别鸣谢 matrix67 的blog Cayley 公式大致说了这么个事：一个 $k$ 阶完全图 $G_k$ 有 $n^{n-2}$ 个不同的生成树，换句话">
<meta property="og:type" content="article">
<meta property="og:title" content="Cayley 公式">
<meta property="og:url" content="http://connorzhong.github.io/2017/10/02/Cayley-公式/index.html">
<meta property="og:site_name" content="ConnorZhong is weak">
<meta property="og:description" content="训练的时候做了 ICPCCamp Day 8 rgn_58 Contest 4. 遇到了奇妙的 Cayley 公式，惨遭教做人，很努力的数了数也只找到 $O(n^2)$ 的做法。这类 Well-known Theory 还是需要慢慢积累的。 特别鸣谢 matrix67 的blog Cayley 公式大致说了这么个事：一个 $k$ 阶完全图 $G_k$ 有 $n^{n-2}$ 个不同的生成树，换句话">
<meta property="og:updated_time" content="2017-10-04T06:50:48.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cayley 公式">
<meta name="twitter:description" content="训练的时候做了 ICPCCamp Day 8 rgn_58 Contest 4. 遇到了奇妙的 Cayley 公式，惨遭教做人，很努力的数了数也只找到 $O(n^2)$ 的做法。这类 Well-known Theory 还是需要慢慢积累的。 特别鸣谢 matrix67 的blog Cayley 公式大致说了这么个事：一个 $k$ 阶完全图 $G_k$ 有 $n^{n-2}$ 个不同的生成树，换句话">
  
    <link rel="alternate" href="/atom.xml" title="ConnorZhong is weak" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ConnorZhong is weak</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">team wiki &quot;https://wiki-resuscitated-hope.icpc-camp.org&quot;</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://connorzhong.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Cayley-公式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/10/02/Cayley-公式/" class="article-date">
  <time datetime="2017-10-02T14:34:49.000Z" itemprop="datePublished">2017-10-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Cayley 公式
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>训练的时候做了 ICPCCamp Day 8 rgn_58 Contest 4. 遇到了奇妙的 Cayley 公式，惨遭教做人，很努力的数了数也只找到 $O(n^2)$ 的做法。这类 Well-known Theory 还是需要慢慢积累的。</p>
<p>特别鸣谢 <a href="http://www.matrix67.com/blog/archives/682" target="_blank" rel="external">matrix67 的blog</a></p>
<p>Cayley 公式大致说了这么个事：一个 $k$ 阶完全图 $G_k$ 有 $n^{n-2}$ 个不同的生成树，换句话说就是 $k$ 个带标号节点所能形成的带标号无根树的个数有 $n^{n-2}$ 个。</p>
<p>一个非常简易的证明是通过 Prüfer 编码来进行证明，这是一种对带标号无根树的编码方式。</p>
<ul>
<li>Prüfer 编码：取一棵含有 $n$ 个节点的无根树，选取当前所有叶子节点中编号最小的节点，将该节点和它所连接的边从树中删除，将该节点的父亲节点的编号记录下来，接着递归地将这个操作做下去，直到只剩最后 $2$ 个节点。这样得到的长度为 $n-2$ 的编码就是 Prüfer 编码。根据定义很容易发现每一棵树都唯一对应了一个 Prüfer 编码。编码中还可以得到一个性质，编码中某个标号 $v$ 出现的次数，就是这个节点的度数 $degree(v)-1$ 。叶子节点不会出现在编码中。</li>
<li>每个 Prüfer 编码也唯一对应着一棵无根树。考虑当前的长度为 $n-2$ 的编码，编码中未出现过的节点中标号最小的即是第一个被编码的节点，其父亲节点是第一位编码，然后递归的考虑后 $n-1$ 位编码，不再考虑已经被还原的节点，最后两个没被还原的节点相连，于是可以还原出整棵树。 </li>
</ul>
<p>由于长度 $n-2$ 的 Prüfer 编码共计 $n^{n -2}$ 个，因此 $k$ 个带标号节点所能形成的带标号无根树的个数有 $n^{n-2}$ 个。</p>
<p>由于 Prüfer 编码的方式可以轻易扩展出，当各个节点的度为 $degree(v)$ 时，无根树的个数。</p>
<script type="math/tex; mode=display">
A =\frac{(n-2)!}{\prod (degree(v)-1)!}</script><p>相关题目</p>
<h3 id="2015-2016-Petrozavodsk-Winter-Training-Camp-Makoto-rng-58-Soejima-Сontest-4-J-Ropes"><a href="#2015-2016-Petrozavodsk-Winter-Training-Camp-Makoto-rng-58-Soejima-Сontest-4-J-Ropes" class="headerlink" title="2015-2016 Petrozavodsk Winter Training Camp, Makoto rng_58 Soejima Сontest 4 J. Ropes"></a><a href="http://codeforces.com/gym/100959" target="_blank" rel="external">2015-2016 Petrozavodsk Winter Training Camp, Makoto rng_58 Soejima Сontest 4</a> J. Ropes</h3><blockquote>
<p>给出 $N$ 个节点的度数 $a_i$ ，求形成的不同的无根树的个数。</p>
<p>$N \leq 10^5, 1\leq a_i \leq 3$ </p>
</blockquote>
<p>直接用公式求就好了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://connorzhong.github.io/2017/10/02/Cayley-公式/" data-id="cj9j638wk0000foi491hw1nvs" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/10/24/网络流学习/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          网络流学习
        
      </div>
    </a>
  
  
    <a href="/2017/08/25/反演魔术小结/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">反演魔术小结</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/10/24/网络流学习/">网络流学习</a>
          </li>
        
          <li>
            <a href="/2017/10/02/Cayley-公式/">Cayley 公式</a>
          </li>
        
          <li>
            <a href="/2017/08/25/反演魔术小结/">反演魔术小结</a>
          </li>
        
          <li>
            <a href="/2017/07/20/每日CF计划/">每日CF计划</a>
          </li>
        
          <li>
            <a href="/2017/07/19/Leetcode-Contests/">Leetcode Contests</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 ConnorZhong<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>